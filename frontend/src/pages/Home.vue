<template>
  <div>
    <!-- Hero Banner -->
    <section class="relative bg-gradient-to-r from-primary-600 to-primary-800 text-white overflow-hidden">
      <div class="container mx-auto px-4 py-16 md:py-24 relative z-10">
        <div class="max-w-2xl">
          <h1 class="text-4xl md:text-5xl font-bold leading-tight mb-4">
            ç²¾é¸å…¨çƒç¾å‘³<br />ç›¡åœ¨äººæ°£ç¾é£Ÿå•†åº—
          </h1>
          <p class="text-lg text-primary-100 mb-8">
            å¾æ—¥æœ¬é›¶é£Ÿåˆ°æ‰‹å·¥å·§å…‹åŠ›ï¼Œå¾å¥åº·ç©€ç‰©åˆ°æœ‰æ©Ÿé£Ÿå“ï¼Œç‚ºæ‚¨åš´é¸ä¸–ç•Œå„åœ°å„ªè³ªç¾é£Ÿã€‚
          </p>
          <router-link
            to="/products"
            class="inline-flex items-center gap-2 px-8 py-3 bg-white text-primary-700 font-semibold rounded-full hover:bg-primary-50 transition-colors"
          >
            {{ $t('home.heroCTA') }}
            <ArrowRightIcon class="w-5 h-5" />
          </router-link>
        </div>
      </div>
      <div class="absolute inset-0 opacity-10">
        <div class="absolute -right-20 -top-20 w-96 h-96 bg-white rounded-full" />
        <div class="absolute -left-10 -bottom-10 w-72 h-72 bg-white rounded-full" />
      </div>
    </section>

    <!-- Category Showcase -->
    <section class="container mx-auto px-4 py-12">
      <h2 class="text-2xl font-bold text-gray-900 mb-8 text-center">ç†±é–€åˆ†é¡</h2>
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
        <router-link
          v-for="cat in categories"
          :key="cat.slug"
          :to="{ name: 'ProductList', params: { slug: cat.slug } }"
          class="group flex flex-col items-center p-4 bg-white rounded-xl border border-gray-200 hover:border-primary-300 hover:shadow-md transition-all"
        >
          <span class="text-4xl mb-3">{{ cat.icon }}</span>
          <span class="text-sm font-medium text-gray-700 group-hover:text-primary-600">{{ cat.name }}</span>
        </router-link>
      </div>
    </section>

    <!-- Featured Products -->
    <section class="bg-gray-50 py-12">
      <div class="container mx-auto px-4">
        <div class="flex items-center justify-between mb-8">
          <h2 class="text-2xl font-bold text-gray-900">{{ $t('home.featuredTitle') }}</h2>
          <router-link to="/products" class="text-sm text-primary-600 hover:text-primary-700 font-medium flex items-center gap-1">
            {{ $t('common.viewAll') }}
            <ArrowRightIcon class="w-4 h-4" />
          </router-link>
        </div>
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 md:gap-6">
          <ProductCard v-for="product in featuredProducts" :key="product.id" :product="product" />
        </div>
      </div>
    </section>

    <!-- Promotional Banner -->
    <section class="container mx-auto px-4 py-12">
      <div class="grid md:grid-cols-2 gap-6">
        <div class="relative bg-gradient-to-br from-secondary-500 to-secondary-700 rounded-2xl p-8 text-white overflow-hidden">
          <h3 class="text-2xl font-bold mb-2">æœ‰æ©Ÿé£Ÿå“å°ˆå€</h3>
          <p class="text-secondary-100 mb-4">ç²¾é¸èªè­‰æœ‰æ©Ÿé£Ÿå“ï¼Œåƒå¾—å®‰å¿ƒåˆå¥åº·</p>
          <router-link
            to="/products?category=organic-food"
            class="inline-block px-6 py-2 bg-white text-secondary-700 font-medium rounded-full hover:bg-secondary-50 transition-colors text-sm"
          >
            ç«‹å³é¸è³¼
          </router-link>
          <div class="absolute -right-8 -bottom-8 w-40 h-40 bg-white/10 rounded-full" />
        </div>
        <div class="relative bg-gradient-to-br from-amber-500 to-amber-700 rounded-2xl p-8 text-white overflow-hidden">
          <h3 class="text-2xl font-bold mb-2">æ—¥æœ¬é›¶é£Ÿç¥­</h3>
          <p class="text-amber-100 mb-4">ç›´é€æ—¥æœ¬äººæ°£é›¶é£Ÿï¼Œé™æ™‚å„ªæƒ ä¸­</p>
          <router-link
            to="/products?category=japanese-snacks"
            class="inline-block px-6 py-2 bg-white text-amber-700 font-medium rounded-full hover:bg-amber-50 transition-colors text-sm"
          >
            ç«‹å³é¸è³¼
          </router-link>
          <div class="absolute -right-8 -bottom-8 w-40 h-40 bg-white/10 rounded-full" />
        </div>
      </div>
    </section>

    <!-- New Arrivals -->
    <section class="container mx-auto px-4 py-12">
      <div class="flex items-center justify-between mb-8">
        <h2 class="text-2xl font-bold text-gray-900">æ–°å“ä¸Šæ¶</h2>
        <router-link to="/products?sort=newest" class="text-sm text-primary-600 hover:text-primary-700 font-medium flex items-center gap-1">
          {{ $t('common.viewAll') }}
          <ArrowRightIcon class="w-4 h-4" />
        </router-link>
      </div>
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 md:gap-6">
        <ProductCard v-for="product in newProducts" :key="product.id" :product="product" />
      </div>
    </section>

    <!-- Trust Badges -->
    <section class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
          <div class="flex flex-col items-center">
            <ShieldCheckIcon class="w-10 h-10 text-primary-400 mb-3" />
            <h3 class="font-semibold text-lg mb-1">{{ $t('home.trustAuth') }}</h3>
            <p class="text-sm text-gray-400">{{ $t('home.trustAuthDesc') }}</p>
          </div>
          <div class="flex flex-col items-center">
            <SparklesIcon class="w-10 h-10 text-primary-400 mb-3" />
            <h3 class="font-semibold text-lg mb-1">{{ $t('home.trustQuality') }}</h3>
            <p class="text-sm text-gray-400">{{ $t('home.trustQualityDesc') }}</p>
          </div>
          <div class="flex flex-col items-center">
            <TruckIcon class="w-10 h-10 text-primary-400 mb-3" />
            <h3 class="font-semibold text-lg mb-1">{{ $t('home.trustShipping') }}</h3>
            <p class="text-sm text-gray-400">{{ $t('home.trustShippingDesc') }}</p>
          </div>
        </div>
      </div>
    </section>
  </div>
</template>

<script setup>
import { ref, computed } from 'vue'
import ProductCard from '@/components/product/ProductCard.vue'
import { useAdminProductStore } from '@/stores/adminProduct'
import {
  ArrowRightIcon,
  ShieldCheckIcon,
  SparklesIcon,
  TruckIcon,
} from '@heroicons/vue/24/outline'

const adminProductStore = useAdminProductStore()

const archivedIds = computed(() => new Set(
  adminProductStore.products
    .filter(p => p.status === 'archived')
    .map(p => p.id)
))

const categories = [
  { name: 'äººæ°£é›¶é£Ÿ', slug: 'popular-snacks', icon: 'ğŸ¿' },
  { name: 'ç²¾é¸èŒ¶å“', slug: 'fine-tea', icon: 'ğŸµ' },
  { name: 'é€²å£å·§å…‹åŠ›', slug: 'imported-chocolate', icon: 'ğŸ«' },
  { name: 'å¥åº·ç©€ç‰©', slug: 'healthy-grains', icon: 'ğŸŒ¾' },
  { name: 'æœ‰æ©Ÿé£Ÿå“', slug: 'organic-food', icon: 'ğŸ¥¬' },
  { name: 'æ—¥æœ¬é›¶é£Ÿ', slug: 'japanese-snacks', icon: 'ğŸ˜' },
  { name: 'æ‰‹å·¥é¤…ä¹¾', slug: 'handmade-cookies', icon: 'ğŸª' },
  { name: 'æœä¹¾èœœé¤', slug: 'dried-fruits', icon: 'ğŸ¥­' },
  { name: 'é£²å“', slug: 'beverages', icon: 'ğŸ§ƒ' },
  { name: 'èª¿å‘³æ–™', slug: 'seasonings', icon: 'ğŸ§‚' },
]

// Mock data for demo â€” replaced by API call later
const allFeatured = [
  { id: 1, name: 'æ—¥æœ¬åŒ—æµ·é“ç™½è‰²æˆ€äººå·§å…‹åŠ›é¤…ä¹¾ 24å…¥', slug: 'shiroi-koibito-24', brand: 'ISHIYA', price: 680, salePrice: 580, image: 'https://placehold.co/400x400/FFF3E0/E65100?text=ç™½è‰²æˆ€äºº', rating: 4.8, reviewCount: 256, isNew: false, inStock: true },
  { id: 2, name: 'æœ‰æ©Ÿå°ç£é«˜å±±çƒé¾èŒ¶ 150g', slug: 'organic-oolong-tea', brand: 'èŒ¶å±±æˆ¿', price: 450, image: 'https://placehold.co/400x400/E8F5E9/2E7D32?text=çƒé¾èŒ¶', rating: 4.9, reviewCount: 189, isNew: true, inStock: true },
  { id: 3, name: 'æ¯”åˆ©æ™‚Godiva ç¶“å…¸æ¾éœ²å·§å…‹åŠ›ç¦®ç›’', slug: 'godiva-truffle-box', brand: 'GODIVA', price: 1280, salePrice: 999, image: 'https://placehold.co/400x400/F3E5F5/7B1FA2?text=GODIVA', rating: 4.7, reviewCount: 142, isNew: false, inStock: true },
  { id: 4, name: 'æ—¥æœ¬å¡æ¨‚æ¯”è–¯æ¢ä¸‰å…„å¼Ÿ 10è¢‹å…¥', slug: 'calbee-jagabee-10', brand: 'Calbee', price: 320, image: 'https://placehold.co/400x400/FFFDE7/F57F17?text=å¡æ¨‚æ¯”', rating: 4.6, reviewCount: 328, isNew: false, inStock: true },
  { id: 5, name: 'æ¾³æ´²æœ‰æ©Ÿè—œéº¥ 500g', slug: 'organic-quinoa-500', brand: 'Nature First', price: 380, salePrice: 299, image: 'https://placehold.co/400x400/FFF8E1/FF8F00?text=è—œéº¥', rating: 4.5, reviewCount: 87, isNew: false, inStock: true },
]

const allNewProducts = [
  { id: 6, name: 'æ³•åœ‹La MÃ¨re Poulard å¥¶æ²¹é¤…ä¹¾ç¦®ç›’', slug: 'la-mere-poulard-cookies', brand: 'La MÃ¨re Poulard', price: 520, image: 'https://placehold.co/400x400/FBE9E7/BF360C?text=æ³•å¼é¤…ä¹¾', rating: 4.4, reviewCount: 56, isNew: true, inStock: true },
  { id: 7, name: 'å°ç£å°è¾²æ‰‹ä½œèŠ’æœä¹¾ 200g', slug: 'handmade-mango-dried', brand: 'åœ¨åœ°å¥½å‘³', price: 280, image: 'https://placehold.co/400x400/FFF3E0/E65100?text=èŠ’æœä¹¾', rating: 4.8, reviewCount: 201, isNew: true, inStock: true },
  { id: 8, name: 'æ—¥æœ¬ä¼Šè—¤åœ’æŠ¹èŒ¶æ‹¿éµ éš¨èº«åŒ…30å…¥', slug: 'itoen-matcha-latte-30', brand: 'ä¼Šè—¤åœ’', price: 450, salePrice: 399, image: 'https://placehold.co/400x400/E8F5E9/1B5E20?text=æŠ¹èŒ¶æ‹¿éµ', rating: 4.6, reviewCount: 178, isNew: true, inStock: true },
  { id: 9, name: 'éŸ“åœ‹CJ éŸ“å¼è¾£æ¤’é†¬ 500g', slug: 'cj-gochujang-500', brand: 'CJ', price: 199, image: 'https://placehold.co/400x400/FFEBEE/C62828?text=è¾£æ¤’é†¬', rating: 4.3, reviewCount: 92, isNew: true, inStock: true },
  { id: 10, name: 'ç¾©å¤§åˆ©Lavazza ç¶“å…¸ä¸­ç„™å’–å•¡è±† 250g', slug: 'lavazza-classico-250', brand: 'Lavazza', price: 380, image: 'https://placehold.co/400x400/EFEBE9/4E342E?text=Lavazza', rating: 4.7, reviewCount: 134, isNew: true, inStock: true },
]

// Filter out archived products
const featuredProducts = computed(() => allFeatured.filter(p => !archivedIds.value.has(p.id)))
const newProducts = computed(() => allNewProducts.filter(p => !archivedIds.value.has(p.id)))
</script>
